import './polyfills.server.mjs';
import{a as X}from"./chunk-OY4IBNTK.mjs";import{a as k,b as tt,c as et}from"./chunk-NAA6HRFT.mjs";import{a as j}from"./chunk-NXOSG7SB.mjs";import{a as Z,b as w}from"./chunk-U7D5EGXH.mjs";import{a as P}from"./chunk-KXZ5GERM.mjs";import{a as D}from"./chunk-O42ZTD4W.mjs";import{$ as a,Fa as f,Kb as K,Lb as A,Na as p,Oa as g,Ob as Q,P as I,Pb as F,Qa as q,Qb as N,Sb as W,Tb as L,U as z,V as x,Va as _,Y as o,Ya as G,Za as V,ba as b,ca as M,j as B,pa as u,qa as h,ra as H,sa as Y,ta as $,ua as d,v as y,va as c,wa as s,wb as J,xa as m,zb as T}from"./chunk-NJKZRZTJ.mjs";import"./chunk-S6KH3LOX.mjs";var it=t=>[t];function mt(t,e){t&1&&m(0,"app-not-found")}function pt(t,e){if(t&1&&m(0,"img",5),t&2){let i=f(2);d("src",i.author.image,x)("alt",i.author.name+" profile image")}}function ut(t,e){t&1&&m(0,"span",6)}function ht(t,e){if(t&1&&(c(0,"div",9)(1,"span"),p(2,"\xB7"),s()(),c(3,"div",3)(4,"span"),p(5),G(6,"translate"),s()()),t&2){let i=f(2);o(5),q(" ",V(6,2,"GENERAL.DATE.UPDATED")," : ",i.updatedDate," ")}}function ft(t,e){if(t&1&&(m(0,"img",0),c(1,"h2",1),p(2),s(),c(3,"div",2)(4,"div",3)(5,"a",4),u(6,pt,1,2,"img",5)(7,ut,1,0,"span",6),s()(),c(8,"div",3)(9,"a",7)(10,"span",8),p(11),s()()(),c(12,"div",9)(13,"span"),p(14,"\xB7"),s()(),c(15,"div",3)(16,"span"),p(17),s()(),u(18,ht,7,4),s(),m(19,"div",10)),t&2){let i=f();d("src",i.image,x)("alt",i.title),o(2),g(i.title),o(3),d("routerLink",_(10,it,"/profile/"+i.author.id+"/"+i.urlSharedService.toLowerURL(i.author.name))),o(),h(i.author.image?6:7),o(3),d("routerLink",_(12,it,"/profile/"+i.author.id+"/"+i.urlSharedService.toLowerURL(i.author.name))),o(2),g(i.author.name),o(6),g(i.date),o(),h(i.updatedDate?18:-1),o(),d("innerHTML",i.content,z)}}var nt=(()=>{let e=class e{constructor(n,r,l,S,v,C,E){this.activatedRoute=n,this.appSharedService=r,this.articleSharedService=l,this.articleService=S,this.dateSharedService=v,this.urlSharedService=C,this.platformId=E}ngOnInit(){this.articleId=this.activatedRoute.snapshot.params.articleId,this.articleSharedService.getArticle(this.articleId).subscribe({next:n=>{let{title:r,image:l,date:S,updated_date:v,author:C,content:E,published:at}=n;this.notFound=!1,this.title=r,this.image=l,this.author=C,this.content=X.parse(E);let O=new Date(S);if(this.date=this.dateSharedService.dt.set({day:O.getDate(),month:O.getMonth()+1,year:O.getFullYear()}).toLocaleString(k.DATE_FULL),v){let R=new Date(v);this.updatedDate=this.dateSharedService.dt.set({day:R.getDate(),month:R.getMonth()+1,year:R.getFullYear()}).toLocaleString(k.DATE_FULL)}this.appSharedService.setTitle(this.title,!1),at===!0&&this.articleService.articleViewed(this.articleId).subscribe()},error:n=>{if(T(this.platformId)){let{type:r}=n.error;r&&r==="NOT_FOUND"&&(this.notFound=!0)}}})}};e.\u0275fac=function(r){return new(r||e)(a(A),a(D),a(Z),a(w),a(tt),a(P),a(I))},e.\u0275cmp=b({type:e,selectors:[["app-article"]],decls:2,vars:1,consts:[["id","cover-image",1,"image-ratio-16x9",3,"src","alt"],[1,"title"],["id","author",1,"row","row-cols-auto","align-items-center"],[1,"col"],[3,"routerLink"],[3,"src","alt"],[1,"fa-regular","fa-circle-user","fa-2x"],[1,"content-link",3,"routerLink"],[1,"fw-bold"],[1,"col","date-delimiter"],["id","content",3,"innerHTML"]],template:function(r,l){r&1&&u(0,mt,1,0,"app-not-found")(1,ft,20,14),r&2&&h(l.notFound?0:l.author?1:-1)},dependencies:[F,L,j,W],styles:["#cover-image[_ngcontent-%COMP%]{width:100%}#author[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:cover;border-radius:100%}#author[_ngcontent-%COMP%]   .fa-circle-user[_ngcontent-%COMP%]{color:#333}#content[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.25rem}.date-delimiter[_ngcontent-%COMP%]{padding:0}"]});let t=e;return t})();var gt=t=>[t];function vt(t,e){t&1&&m(0,"app-not-found")}function St(t,e){if(t&1&&(c(0,"div",3)(1,"a",4),m(2,"img",5),c(3,"h5"),p(4),s()()()),t&2){let i=e.$implicit,n=f(2);o(),d("routerLink",_(4,gt,"article/"+i.id+"/"+n.urlSharedService.toLowerURL(i.title))),o(),d("src",i.image,x)("alt",i.title),o(2),g(i.title)}}function Ct(t,e){if(t&1&&(c(0,"div",0)(1,"h2",1),p(2),s()(),c(3,"div",2),Y(4,St,5,6,"div",3,H),s()),t&2){let i=f();o(2),g(i.categoryName),o(2),$(i.articles)}}function xt(t,e){if(t&1&&m(0,"br")(1,"app-pagination",6),t&2){let i=f();o(),d("nbPages",i.nbPages)}}var rt=(()=>{let e=class e{constructor(n,r,l,S,v,C){this.router=n,this.activatedRoute=r,this.articleService=l,this.appSharedService=S,this.urlSharedService=v,this.platformId=C}ngOnInit(){this.getMetaInformation(),this.getArticles(),this.routerEventsSubscription=this.router.events.pipe(B(n=>n instanceof K)).subscribe(()=>{new RegExp("/categorie/.[^/]*$").test(this.router.url)&&(this.getMetaInformation(),this.getArticles())})}ngOnDestroy(){this.routerEventsSubscription.unsubscribe()}get category(){return this.activatedRoute.snapshot.url[0].path}get page(){return Number(this.activatedRoute.snapshot.queryParams.page||"1")}getArticles(){this.articleService.getArticleByCategory(this.category,this.page).subscribe({next:n=>{this.articles=n,this.articles.length?(this.notFound=!1,T(this.platformId)&&setTimeout(()=>window.scrollTo({top:0,behavior:"instant"}))):this.notFound=!0},error:n=>{n.status===404&&(this.notFound=!0)}})}getMetaInformation(){this.articleService.getArticleCategoryMeta(this.category).subscribe({next:n=>{this.page<=n.nbPages?(this.categoryName=n.categoryName,this.totalArticles=n.totalArticles,this.nbPages=n.nbPages,this.notFound=!1,this.appSharedService.setTitle(this.categoryName,!1)):this.notFound=!0}})}};e.\u0275fac=function(r){return new(r||e)(a(Q),a(A),a(w),a(D),a(P),a(I))},e.\u0275cmp=b({type:e,selectors:[["app-category"]],decls:3,vars:3,consts:[[1,"articles-section-title"],[1,"title"],[1,"row"],[1,"col-12","col-md-6"],[1,"title-link",3,"routerLink"],[1,"image-ratio-16x9",3,"src","alt"],[3,"nbPages"]],template:function(r,l){r&1&&(u(0,vt,1,0,"app-not-found"),u(1,Ct,6,1),u(2,xt,2,1)),r&2&&(h(l.notFound?0:-1),o(),h(l.articles?1:-1),o(),h(l.nbPages?2:-1))},dependencies:[F,L,et,j],styles:["img[_ngcontent-%COMP%]{width:100%}.articles-section-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}"]});let t=e;return t})();var _t=[{path:":categorie/article/:articleId/:articleTitle",component:nt},{path:":categorie",component:rt}],ot=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=M({type:e}),e.\u0275inj=y({imports:[N.forChild(_t),N]});let t=e;return t})();var Wt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=M({type:e}),e.\u0275inj=y({imports:[J,ot]});let t=e;return t})();export{Wt as CategoryModule};
