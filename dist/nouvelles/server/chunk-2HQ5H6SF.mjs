import './polyfills.server.mjs';
import{a as tt,b as E}from"./chunk-PHOHZVNL.mjs";import{a as Z}from"./chunk-OTDT4SST.mjs";import{a as U,b as et,c as it}from"./chunk-5FA6GL3M.mjs";import{a as w}from"./chunk-LYTLWDTW.mjs";import{a as D}from"./chunk-5PWVFA7X.mjs";import{a as j}from"./chunk-35FZDEDS.mjs";import{b as X,c as P}from"./chunk-PKKD7OY7.mjs";import{B as y,Ba as h,H as I,Hb as Q,I as b,Ib as F,Ja as p,Ka as f,Lb as W,Ma as G,Mb as L,Oa as T,Ob as k,Qa as _,Ta as V,Ua as J,Y as M,ba as H,ca as C,fa as o,ga as a,m as z,na as v,ob as K,pa as d,qb as A,sa as u,ta as Y,ua as $,va as q,wa as c,xa as s,ya as m}from"./chunk-EARIF5OB.mjs";import"./chunk-VVCT4QZE.mjs";var nt=t=>[t];function pt(t,e){t&1&&m(0,"app-not-found")}function ut(t,e){if(t&1&&m(0,"img",5),t&2){let i=h(2);d("src",i.author.image,C)("alt",i.author.name+" profile image")}}function ht(t,e){t&1&&m(0,"span",10)}function ft(t,e){if(t&1&&(c(0,"div",8)(1,"span"),p(2,"\xB7"),s()(),c(3,"div",3)(4,"span"),p(5),V(6,"translate"),s()()),t&2){let i=h(2);o(5),G(" ",J(6,2,"GENERAL.DATE.UPDATED")," : ",i.updatedDate," ")}}function gt(t,e){if(t&1&&(m(0,"img",0),c(1,"h2",1),p(2),s(),c(3,"div",2)(4,"div",3)(5,"a",4),v(6,ut,1,2,"img",5)(7,ht,1,0),s()(),c(8,"div",3)(9,"a",6)(10,"span",7),p(11),s()()(),c(12,"div",8)(13,"span"),p(14,"\xB7"),s()(),c(15,"div",3)(16,"span"),p(17),s()(),v(18,ft,7,4),s(),m(19,"div",9)),t&2){let i=h();d("src",i.image,C)("alt",i.title),o(2),f(i.title),o(3),d("routerLink",_(10,nt,"/profile/"+i.author.id+"/"+i.urlSharedService.toLowerURL(i.author.name))),o(),u(6,i.author.image?6:7),o(3),d("routerLink",_(12,nt,"/profile/"+i.author.id+"/"+i.urlSharedService.toLowerURL(i.author.name))),o(2),f(i.author.name),o(6),f(i.date),o(),u(18,i.updatedDate?18:-1),o(),d("innerHTML",i.content,H)}}var rt=(()=>{let e=class e{constructor(n,r,l,S,g,x,O){this.activatedRoute=n,this.appSharedService=r,this.articleSharedService=l,this.articleService=S,this.dateSharedService=g,this.urlSharedService=x,this.platformId=O}ngOnInit(){this.articleId=this.activatedRoute.snapshot.params.articleId,this.articleSharedService.getArticle(this.articleId).subscribe({next:n=>{let{title:r,image:l,date:S,updated_date:g,author:x,content:O,published:ct}=n;this.notFound=!1,this.title=r,this.image=l,this.author=x,this.content=Z.parse(O);let R=new Date(S);if(this.date=this.dateSharedService.dt.set({day:R.getDate(),month:R.getMonth()+1,year:R.getFullYear()}).toLocaleString(U.DATE_FULL),g){let N=new Date(g);this.updatedDate=this.dateSharedService.dt.set({day:N.getDate(),month:N.getMonth()+1,year:N.getFullYear()}).toLocaleString(U.DATE_FULL)}this.appSharedService.setTitle(this.title,!1),ct===!0&&this.articleService.articleViewed(this.articleId).subscribe()},error:n=>{if(A(this.platformId)){let{type:r}=n.error;r&&r==="NOT_FOUND"&&(this.notFound=!0)}}})}};e.\u0275fac=function(r){return new(r||e)(a(F),a(j),a(tt),a(E),a(et),a(D),a(M))},e.\u0275cmp=I({type:e,selectors:[["app-article"]],standalone:!0,features:[T],decls:2,vars:1,consts:[["id","cover-image",1,"image-ratio-16x9",3,"src","alt"],[1,"title"],["id","author",1,"row","row-cols-auto","align-items-center"],[1,"col"],[3,"routerLink"],[3,"src","alt"],[1,"content-link",3,"routerLink"],[1,"fw-bold"],[1,"col","date-delimiter"],["id","content",3,"innerHTML"],[1,"fa-regular","fa-circle-user","fa-2x"]],template:function(r,l){r&1&&v(0,pt,1,0,"app-not-found")(1,gt,20,14),r&2&&u(0,l.notFound?0:l.author?1:-1)},dependencies:[L,P,X,w],styles:["#cover-image[_ngcontent-%COMP%]{width:100%}#author[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:cover;border-radius:100%}#author[_ngcontent-%COMP%]   .fa-circle-user[_ngcontent-%COMP%]{color:#333}#content[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.25rem}.date-delimiter[_ngcontent-%COMP%]{padding:0}"]});let t=e;return t})();var vt=t=>[t];function St(t,e){t&1&&m(0,"app-not-found")}function xt(t,e){if(t&1&&(c(0,"div",3)(1,"a",4),m(2,"img",5),c(3,"h5"),p(4),s()()()),t&2){let i=e.$implicit,n=h(2);o(),d("routerLink",_(4,vt,"article/"+i.id+"/"+n.urlSharedService.toLowerURL(i.title))),o(),d("src",i.image,C)("alt",i.title),o(2),f(i.title)}}function Ct(t,e){if(t&1&&(c(0,"div",0)(1,"h2",1),p(2),s()(),c(3,"div",2),$(4,xt,5,6,"div",3,Y),s()),t&2){let i=h();o(2),f(i.categoryName),o(2),q(i.articles)}}function _t(t,e){if(t&1&&m(0,"br")(1,"app-pagination",6),t&2){let i=h();o(),d("nbPages",i.nbPages)}}var ot=(()=>{let e=class e{constructor(n,r,l,S,g,x){this.router=n,this.activatedRoute=r,this.articleService=l,this.appSharedService=S,this.urlSharedService=g,this.platformId=x}ngOnInit(){this.getMetaInformation(),this.getArticles(),this.routerEventsSubscription=this.router.events.pipe(z(n=>n instanceof Q)).subscribe(()=>{new RegExp("/categorie/.[^/]*$").test(this.router.url)&&(this.getMetaInformation(),this.getArticles())})}ngOnDestroy(){this.routerEventsSubscription.unsubscribe()}get category(){return this.activatedRoute.snapshot.url[0].path}get page(){return Number(this.activatedRoute.snapshot.queryParams.page||"1")}getArticles(){this.articleService.getArticleByCategory(this.category,this.page).subscribe({next:n=>{this.articles=n,this.articles.length?(this.notFound=!1,A(this.platformId)&&setTimeout(()=>window.scrollTo({top:0,behavior:"instant"}))):this.notFound=!0},error:n=>{n.status===404&&(this.notFound=!0)}})}getMetaInformation(){this.articleService.getArticleCategoryMeta(this.category).subscribe({next:n=>{this.page<=n.nbPages?(this.categoryName=n.categoryName,this.totalArticles=n.totalArticles,this.nbPages=n.nbPages,this.notFound=!1,this.appSharedService.setTitle(this.categoryName,!1)):this.notFound=!0}})}};e.\u0275fac=function(r){return new(r||e)(a(W),a(F),a(E),a(j),a(D),a(M))},e.\u0275cmp=I({type:e,selectors:[["app-category"]],standalone:!0,features:[T],decls:3,vars:3,consts:[[1,"articles-section-title"],[1,"title"],[1,"row"],[1,"col-12","col-md-6"],[1,"title-link",3,"routerLink"],[1,"image-ratio-16x9",3,"src","alt"],[3,"nbPages"]],template:function(r,l){r&1&&v(0,St,1,0,"app-not-found")(1,Ct,6,1)(2,_t,2,1),r&2&&(u(0,l.notFound?0:-1),o(),u(1,l.articles?1:-1),o(),u(2,l.nbPages?2:-1))},dependencies:[L,P,it,w],styles:["img[_ngcontent-%COMP%]{width:100%}.articles-section-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}"]});let t=e;return t})();var yt=[{path:":categorie/article/:articleId/:articleTitle",component:rt},{path:":categorie",component:ot}],at=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=b({type:e}),e.\u0275inj=y({imports:[k.forChild(yt),k]});let t=e;return t})();var Xt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=b({type:e}),e.\u0275inj=y({imports:[K,at]});let t=e;return t})();export{Xt as CategoryModule};
