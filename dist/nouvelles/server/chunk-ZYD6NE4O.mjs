import './polyfills.server.mjs';
import{a as ie}from"./chunk-D2WLM3ZN.mjs";import{b as j,c as Y,d as U,e as P,f as k,g as G,h as w,j as L,k as V,q as N}from"./chunk-HLLCSMIT.mjs";import{a as te}from"./chunk-35FZDEDS.mjs";import{b as _,c as I,d as E,e as ee}from"./chunk-PKKD7OY7.mjs";import{A as q,Aa as b,B as O,Ba as x,D as z,H as v,I as R,Ja as p,Ka as y,La as m,Oa as C,Ob as X,P as F,Pa as B,Q as D,Ta as l,Ua as d,ca as J,fa as o,ga as f,na as g,ob as Q,pa as h,qa as K,sa as c,ub as Z,wa as s,xa as a,ya as u,za as A}from"./chunk-EARIF5OB.mjs";import"./chunk-VVCT4QZE.mjs";var T=(()=>{let t=class t{constructor(r){this.http=r,this.API_PREFIX="user"}updateUserImage(r,i){let n=`${this.API_PREFIX}/${r}/image`;return this.http.put(n,i,{withCredentials:!0})}updatePassword(r,i){let n=`${this.API_PREFIX}/${r}/password`;return this.http.put(n,i,{withCredentials:!0})}updateBiography(r,i){let n=`${this.API_PREFIX}/${r}/biography`;return this.http.put(n,i,{withCredentials:!0})}deleteUser(r){let i=`${this.API_PREFIX}/${r}`;return this.http.delete(i,{withCredentials:!0})}};t.\u0275fac=function(i){return new(i||t)(z(Z))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function me(e,t){if(e&1){let S=A();s(0,"span",6),b("click",function(){F(S);let i=x(2);return D(i.onDeleteImageClick())}),a()}}function ce(e,t){if(e&1&&(s(0,"div",1),u(1,"img",4),g(2,me,1,0,"span",5),a()),e&2){let S=x();o(),h("src",S.userSharedService.image,J)("alt",S.userSharedService.name),o(),c(2,S.onImageChange!=="true"?2:-1)}}function ue(e,t){e&1&&u(0,"span",7)}function fe(e,t){e&1&&(s(0,"button",3),p(1),l(2,"translate"),a()),e&2&&(o(),m(" ",d(2,1,"GENERAL.UPDATING")," "))}function Se(e,t){if(e&1){let S=A();s(0,"label",8),p(1),l(2,"translate"),a(),s(3,"input",9),b("change",function(i){F(S);let n=x();return D(n.onFileSelected(i))}),a()}e&2&&(o(),m(" ",d(2,1,"SETTINGS_PAGE.CHANGE_IMAGE")," "))}var ne=(()=>{let t=class t{constructor(r,i,n){this.userSharedService=r,this.fileSharedService=i,this.userService=n}ngOnInit(){this.onImageChange="false"}onDeleteImageClick(){this.userService.updateUserImage(this.userSharedService.id,{image:null}).subscribe({complete:()=>{this.userSharedService.image=null}})}onFileSelected(r){let i=r.target.files[0];if(this.onImageChange="true",this.userSharedService.image){let n={fileName:this.userSharedService.image?.split("/").slice(3).join("/")};this.fileSharedService.delete(n).subscribe()}this.fileSharedService.upload(i).subscribe({next:n=>{this.userService.updateUserImage(this.userSharedService.id,{image:n.file}).subscribe({complete:()=>{this.userSharedService.image=n.file,this.onImageChange="success"}})}})}};t.\u0275fac=function(i){return new(i||t)(f(E),f(ie),f(T))},t.\u0275cmp=v({type:t,selectors:[["app-settings-image"]],standalone:!0,features:[C],decls:12,vars:7,consts:[["id","image",1,"text-center"],[1,"text-end"],[1,"text-center"],["disabled","true",1,"btn","btn-outline-primary"],[3,"src","alt"],["id","delete-image",1,"fa-regular","fa-circle-xmark"],["id","delete-image",1,"fa-regular","fa-circle-xmark",3,"click"],["id","user-icon",1,"fa-regular","fa-circle-user","fa-6x"],["for","file",1,"btn","btn-outline-primary"],["id","file","type","file","autocomplete","off","required","","hidden","",3,"change"]],template:function(i,n){i&1&&(s(0,"form")(1,"fieldset")(2,"legend"),p(3),l(4,"translate"),a(),u(5,"hr"),s(6,"div",0),g(7,ce,3,3,"div",1)(8,ue,1,0),a(),s(9,"div",2),g(10,fe,3,3,"button",3)(11,Se,4,3),a()()()),i&2&&(o(3),y(d(4,5,"SETTINGS_PAGE.PROFILE_IMAGE")),o(4),c(7,n.userSharedService.image?7:8),o(2),K("mt-3",!n.userSharedService.image),o(),c(10,n.onImageChange==="true"?10:11))},dependencies:[I,_],styles:["#image[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-of-type{display:inline-block;margin:0 auto}#image[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-of-type   img[_ngcontent-%COMP%]{display:block;width:128px;height:128px;border-radius:100%;border:1px solid #ccc}#image[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-of-type   span#delete-image[_ngcontent-%COMP%]{position:relative;top:-128px;right:0;font-size:1.25rem}#image[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-of-type   span#delete-image[_ngcontent-%COMP%]:hover{cursor:pointer}#image[_ngcontent-%COMP%]   span#user-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:128px;height:128px;margin:0 auto;border-radius:100%;border:1px solid #ccc;color:#333}"]});let e=t;return e})();var ge=()=>["false","error","success"];function he(e,t){if(e&1&&(s(0,"button",7),p(1),l(2,"translate"),a()),e&2){let S=x();h("disabled",S.passwordForm.valid===!1),o(),m(" ",d(2,2,"GENERAL.MODIFY")," ")}}function ve(e,t){e&1&&(s(0,"button",8),u(1,"span",11),p(2),l(3,"translate"),a()),e&2&&(h("disabled",!0),o(2),m(" ",d(3,2,"GENERAL.MODIFICATION")," "))}function Ce(e,t){e&1&&(s(0,"p",9),p(1),l(2,"translate"),a()),e&2&&(o(),m(" ",d(2,1,"SETTINGS_PAGE.PASSWORD_MODIFIED")," "))}function _e(e,t){if(e&1&&(s(0,"p",10),p(1),l(2,"translate"),a()),e&2){let S=x();o(),m(" ",d(2,1,S.error)," ")}}var oe=(()=>{let t=class t{constructor(r,i){this.userSharedService=r,this.userService=i}ngOnInit(){this.passwordForm=new k({password:new G("",[Y.required]),repeatedPassword:new G("",[Y.required])}),this.onModify="false"}onSubmit(){let r=this.passwordForm.value;this.onModify="true",this.userService.updatePassword(this.userSharedService.id,r).subscribe({next:()=>{this.onModify="success"},error:i=>{let{type:n}=i.error;this.onModify="error",n&&(this.error=`SETTINGS_PAGE.ERRORS.${n}`)}})}};t.\u0275fac=function(i){return new(i||t)(f(E),f(T))},t.\u0275cmp=v({type:t,selectors:[["app-settings-password"]],standalone:!0,features:[C],decls:23,vars:15,consts:[[3,"ngSubmit","formGroup"],[1,"mt-3"],["for","password",1,"form-label"],[1,"fa-solid","fa-lock"],["id","password","type","password","formControlName","password",1,"form-control"],["id","password","type","password","formControlName","repeatedPassword",1,"form-control"],[1,"mt-3","text-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-primary",3,"disabled"],[1,"text-success","mt-3"],[1,"text-danger","mt-3"],[1,"fa-solid","fa-spinner","fa-spin"]],template:function(i,n){i&1&&(s(0,"form",0),b("ngSubmit",function(){return n.onSubmit()}),s(1,"fieldset")(2,"legend"),p(3),l(4,"translate"),a(),u(5,"hr"),s(6,"div",1)(7,"label",2),u(8,"span",3),p(9),l(10,"translate"),a(),u(11,"input",4),a(),s(12,"div",1)(13,"label",2),u(14,"span",3),p(15),l(16,"translate"),a(),u(17,"input",5),a(),s(18,"div",6),g(19,he,3,4,"button",7)(20,ve,4,4,"button",8)(21,Ce,3,3,"p",9)(22,_e,3,3,"p",10),a()()()),i&2&&(h("formGroup",n.passwordForm),o(3),y(d(4,8,"FORMS.PASSWORD")),o(6),m(" ",d(10,10,"FORMS.PASSWORD")," "),o(6),m(" ",d(16,12,"FORMS.REPEAT_PASSWORD")," "),o(4),c(19,B(14,ge).includes(n.onModify)?19:-1),o(),c(20,n.onModify==="true"?20:-1),o(),c(21,n.onModify==="success"?21:-1),o(),c(22,n.onModify==="error"?22:-1))},dependencies:[I,_,N,w,j,U,P,L,V]});let e=t;return e})();var Ie=()=>["false","success"];function Ee(e,t){e&1&&(s(0,"button",5),p(1),l(2,"translate"),a()),e&2&&(o(),m(" ",d(2,1,"GENERAL.MODIFY")," "))}function be(e,t){e&1&&(s(0,"button",6),u(1,"span",8),p(2),l(3,"translate"),a()),e&2&&(h("disabled",!0),o(2),m(" ",d(3,2,"GENERAL.MODIFICATION")," "))}function xe(e,t){e&1&&(s(0,"p",7),p(1),l(2,"translate"),a()),e&2&&(o(),m(" ",d(2,1,"SETTINGS_PAGE.BIOGRAPHY_MODIFIED")," "))}var ae=(()=>{let t=class t{constructor(r,i){this.userSharedService=r,this.userService=i}ngOnInit(){this.biographyForm=new k({biography:new G(this.userSharedService.biography)}),this.onModify="false"}onSubmit(){let r=this.biographyForm.value;this.onModify="true",this.userService.updateBiography(this.userSharedService.id,r).subscribe({complete:()=>{this.onModify="success"}})}};t.\u0275fac=function(i){return new(i||t)(f(E),f(T))},t.\u0275cmp=v({type:t,selectors:[["app-settings-biography"]],standalone:!0,features:[C],decls:15,vars:11,consts:[[3,"ngSubmit","formGroup"],[1,"mt-3"],["for","biography",1,"form-label"],["id","biography","cols","30","rows","10","formControlName","biography",1,"form-control"],[1,"mt-3","text-end"],["type","submit",1,"btn","btn-primary"],[1,"btn","btn-primary",3,"disabled"],[1,"text-success","mt-3"],[1,"fa-solid","fa-spinner","fa-spin"]],template:function(i,n){i&1&&(s(0,"form",0),b("ngSubmit",function(){return n.onSubmit()}),s(1,"fieldset")(2,"legend"),p(3),l(4,"translate"),a(),u(5,"hr"),s(6,"div",1)(7,"label",2),p(8),l(9,"translate"),a(),u(10,"textarea",3),a(),s(11,"div",4),g(12,Ee,3,3,"button",5)(13,be,4,4,"button",6)(14,xe,3,3,"p",7),a()()()),i&2&&(h("formGroup",n.biographyForm),o(3),y(d(4,6,"GENERAL.BIOGRAPHY")),o(5),y(d(9,8,"GENERAL.BIOGRAPHY")),o(4),c(12,B(10,Ie).includes(n.onModify)?12:-1),o(),c(13,n.onModify==="true"?13:-1),o(),c(14,n.onModify==="success"?14:-1))},dependencies:[I,_,N,w,j,U,P,L,V]});let e=t;return e})();function ye(e,t){if(e&1){let S=A();s(0,"button",4),b("click",function(){F(S);let i=x();return D(i.onDeleteClick())}),p(1),l(2,"translate"),a()}e&2&&(o(),m(" ",d(2,1,"SETTINGS_PAGE.DELETE_ACCOUNT")," "))}function Te(e,t){e&1&&(s(0,"button",3),p(1),l(2,"translate"),a()),e&2&&(h("disabled",!0),o(),m(" ",d(2,2,"GENERAL.DELETION")," "))}function Me(e,t){e&1&&(s(0,"p"),p(1),l(2,"translate"),a()),e&2&&(o(),m(" ",d(2,1,"SETTINGS_PAGE.ACCOUNT_DELETED")," "))}var se=(()=>{let t=class t{constructor(r,i,n){this.authSharedService=r,this.userSharedService=i,this.userService=n}ngOnInit(){this.onDelete="false"}onDeleteClick(){this.onDelete="true",this.userService.deleteUser(this.userSharedService.id).subscribe({complete:()=>{this.onDelete="success",setTimeout(()=>this.authSharedService.doLogout(),3e3)}})}};t.\u0275fac=function(i){return new(i||t)(f(ee),f(E),f(T))},t.\u0275cmp=v({type:t,selectors:[["app-settings-delete"]],standalone:!0,features:[C],decls:13,vars:9,consts:[[1,"mt-3"],[1,"text-danger","fw-bold"],["type","button",1,"btn","btn-danger"],["type","button",1,"btn","btn-danger",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(i,n){i&1&&(s(0,"form")(1,"fieldset")(2,"legend"),p(3),l(4,"translate"),a(),u(5,"hr"),s(6,"div",0)(7,"p",1),p(8),l(9,"translate"),a(),g(10,ye,3,3,"button",2)(11,Te,3,4,"button",3)(12,Me,3,3,"p"),a()()()),i&2&&(o(3),m(" ",d(4,5,"SETTINGS_PAGE.DELETE_ACCOUNT")," "),o(5),m(" ",d(9,7,"SETTINGS_PAGE.DELETE_ACCOUNT_WARNING")," "),o(2),c(10,n.onDelete==="false"?10:-1),o(),c(11,n.onDelete==="true"?11:-1),o(),c(12,n.onDelete==="success"?12:-1))},dependencies:[I,_,N,w,P]});let e=t;return e})();function Pe(e,t){e&1&&(s(0,"div",0)(1,"h2",1),p(2),l(3,"translate"),a(),u(4,"app-settings-image")(5,"app-settings-password")(6,"app-settings-biography")(7,"app-settings-delete"),a()),e&2&&(o(2),y(d(3,1,"HEADER.ACCOUNT.SETTINGS")))}var pe=(()=>{let t=class t{constructor(r,i){this.userSharedService=r,this.appSharedService=i}ngOnInit(){this.appSharedService.setTitle("HEADER.ACCOUNT.SETTINGS")}};t.\u0275fac=function(i){return new(i||t)(f(E),f(te))},t.\u0275cmp=v({type:t,selectors:[["app-settings"]],standalone:!0,features:[C],decls:1,vars:1,consts:[[1,"container"],[1,"title"]],template:function(i,n){i&1&&g(0,Pe,8,3,"div",0),i&2&&c(0,n.userSharedService.id?0:-1)},dependencies:[I,_,ne,oe,ae,se]});let e=t;return e})();var we=[{path:"",component:pe}],le=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=R({type:t}),t.\u0275inj=O({imports:[X.forChild(we),X]});let e=t;return e})();var it=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=R({type:t}),t.\u0275inj=O({imports:[Q,le]});let e=t;return e})();export{it as SettingsModule};
