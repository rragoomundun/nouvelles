import{a as K}from"./chunk-BDECMZND.js";import{a as ge,b as X}from"./chunk-R3KN7J22.js";import{b as H,c as O,d as P,e as D,f as B,g as y,h as U,j as q,k as j,q as Q}from"./chunk-3SIJ3UNX.js";import{a as ue}from"./chunk-X462W5HG.js";import{$ as C,$a as G,Aa as T,Ba as L,Ca as se,D as $,F as R,Fa as p,Ga as c,Ha as z,K as x,L as E,P as Y,Ra as pe,S as ne,T as re,V as i,W as h,Wa as ce,Xa as me,Ya as J,_a as V,ba as S,bb as de,cb as M,db as I,ea as v,eb as fe,fa as oe,ga as ae,ha as le,ia as o,ja as r,ka as s,la as k,ma as _,na as u,qa as w,sa as F,ta as A,ua as N,va as d,wa as b,xa as f}from"./chunk-VZL6H5W3.js";var be=e=>[e],we=()=>["/article/nouveau"];function Re(e,n){if(e&1){let a=k();o(0,"li",7)(1,"a",18),_("click",function(){x(a);let t=u();return E(t.hideHamburgerMenu())}),d(2),r()()}if(e&2){let a=n.$implicit;i(),S("routerLink",se(2,be,"/categorie/"+a.label)),i(),f(" ",a.name," ")}}function Te(e,n){if(e&1&&(s(0,"img",16),p(1,"translate")),e&2){let a=u();S("src",a.userSharedService.image,ne)("alt",c(1,2,"GENERAL.USER_IMAGE"))}}function ye(e,n){e&1&&(s(0,"i",19),d(1,"\xA0 "))}function ke(e,n){if(e&1&&d(0),e&2){let a=u();f(" ",a.userSharedService.name," ")}}function Le(e,n){e&1&&(d(0),p(1,"translate")),e&2&&f(" ",c(1,1,"HEADER.ACCOUNT.ACCOUNT")," ")}function Me(e,n){if(e&1){let a=k();o(0,"li")(1,"a",20),_("click",function(){x(a);let t=u();return t.onRegisterClick(),E(t.hideHamburgerMenu())}),d(2),p(3,"translate"),r()(),o(4,"li")(5,"a",20),_("click",function(){x(a);let t=u();return t.onLoginClick(),E(t.hideHamburgerMenu())}),d(6),p(7,"translate"),r()()}e&2&&(i(2),f(" ",c(3,2,"GENERAL.REGISTER")," "),i(4),f(" ",c(7,4,"GENERAL.LOGIN")," "))}function Ie(e,n){if(e&1){let a=k();o(0,"li")(1,"a",21),_("click",function(){x(a);let t=u(2);return E(t.hideHamburgerMenu())}),s(2,"span",25),d(3),p(4,"translate"),r()()}e&2&&(i(),S("routerLink",L(4,we)),i(2),f(" ",c(4,2,"HEADER.ACCOUNT.WRITE_ARTICLE")," "))}function Oe(e,n){if(e&1){let a=k();o(0,"li")(1,"a",21),_("click",function(){x(a);let t=u();return E(t.hideHamburgerMenu())}),s(2,"span",19),d(3),p(4,"translate"),r()(),C(5,Ie,5,5,"li"),o(6,"li")(7,"a",22),_("click",function(){x(a);let t=u();return E(t.hideHamburgerMenu())}),s(8,"span",23),d(9),p(10,"translate"),r()(),o(11,"li")(12,"a",20),_("click",function(){x(a);let t=u();return E(t.onLogoutClick())}),s(13,"span",24),d(14),p(15,"translate"),r()()}if(e&2){let a=u();i(),w("routerLink",a.profileLink),i(2),f(" ",c(4,5,"HEADER.ACCOUNT.MY_ACCOUNT")," "),i(2),v(5,a.userSharedService.roles&&(a.userSharedService.roles.includes("redacteur")||a.userSharedService.roles.includes("admin"))?5:-1),i(4),f(" ",c(10,7,"HEADER.ACCOUNT.SETTINGS")," "),i(5),f(" ",c(15,9,"HEADER.ACCOUNT.LOUGOUT")," ")}}var ve=(()=>{let n=class n{constructor(l,t,m,g){this.router=l,this.userSharedService=t,this.categorySharedService=m,this.urlSharedService=g,this.registerClick=new Y,this.loginCLick=new Y,this.logoutClick=new Y}get profileLink(){return this.userSharedService.isLoggedIn?`/profile/${this.userSharedService.id}/${this.urlSharedService.toLowerURL(this.userSharedService.name)}`:null}ngOnInit(){this.searchForm=new B({query:new y("")})}hideHamburgerMenu(){let l=document.querySelector(".navbar-toggler");l&&l.click()}onWindowClick(l){let t=document.querySelector("header"),m=document.querySelector(".navbar-collapse.collapse.show");t?.contains(l.target)===!1&&m&&window.innerWidth<992&&this.hideHamburgerMenu()}onRegisterClick(){this.registerClick.emit()}onLoginClick(){this.loginCLick.emit()}onLogoutClick(){this.logoutClick.emit(),this.hideHamburgerMenu()}onSearchSubmit(l){l.preventDefault();let t=this.searchForm.controls.query.value;if(t){if(this.router.url.includes("/rechercher")){let m=new CustomEvent("headerSearch",{bubbles:!0,cancelable:!0,detail:{query:t}});document.dispatchEvent(m)}else this.router.navigate(["/rechercher"],{queryParams:{query:t}}),this.hideHamburgerMenu();this.searchForm.controls.query.setValue("")}}};n.\u0275fac=function(t){return new(t||n)(h(me),h(V),h(K),h(ue))},n.\u0275cmp=R({type:n,selectors:[["app-header"]],hostBindings:function(t,m){t&1&&_("click",function(W){return m.onWindowClick(W)},!1,re)},outputs:{registerClick:"registerClick",loginCLick:"loginCLick",logoutClick:"logoutClick"},standalone:!0,features:[T],decls:32,vars:13,consts:[[1,"navbar","navbar-expand-lg"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand","app-logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbar-toggler","aria-controls","navbar-toggler","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbar-toggler",1,"collapse","navbar-collapse"],[1,"navbar-nav","mb-2","mb-lg-0"],[1,"nav-item"],["id","search-bar","role","search",1,"d-flex",3,"submit","formGroup"],["type","search","formControlName","query",1,"form-control",3,"placeholder"],["type","submit",1,"btn"],[1,"fa-solid","fa-magnifying-glass"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],["routerLink","forum",1,"nav-link",3,"click"],[1,"dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[3,"src","alt"],[1,"dropdown-menu"],[1,"nav-link",3,"click","routerLink"],[1,"fa-regular","fa-circle-user"],[1,"dropdown-item",3,"click"],[1,"dropdown-item",3,"click","routerLink"],["routerLink","/parametres",1,"dropdown-item",3,"click"],[1,"fa-solid","fa-gear"],[1,"fa-solid","fa-arrow-right-from-bracket"],[1,"fa-solid","fa-pen-to-square"]],template:function(t,m){t&1&&(o(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),d(4),p(5,"translate"),r(),o(6,"button",3),s(7,"span",4),r(),o(8,"div",5)(9,"ul",6),ae(10,Re,3,4,"li",7,oe),o(12,"li",7)(13,"form",8),_("submit",function(W){return m.onSearchSubmit(W)}),s(14,"input",9),p(15,"translate"),o(16,"button",10),s(17,"i",11),r()()()(),o(18,"ul",12)(19,"li",7)(20,"a",13),_("click",function(){return m.hideHamburgerMenu()}),d(21),p(22,"translate"),r()(),o(23,"li",14)(24,"a",15),C(25,Te,2,4,"img",16)(26,ye,2,0)(27,ke,1,1)(28,Le,2,3),r(),o(29,"ul",17),C(30,Me,8,6)(31,Oe,16,11),r()()()()()()()),t&2&&(i(4),f(" ",c(5,7,"GENERAL.TITLE")," "),i(6),le(m.categorySharedService.categories),i(3),S("formGroup",m.searchForm),i(),w("placeholder",c(15,9,"GENERAL.SEARCH")),i(7),f(" ",c(22,11,"GENERAL.FORUM"),""),i(4),v(25,m.userSharedService.image?25:26),i(2),v(27,m.userSharedService.name?27:28),i(3),v(30,m.userSharedService.isLoggedIn===!1?30:31))},dependencies:[I,M,Q,U,H,P,D,q,j,J],styles:["header[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:1000;background-color:#fff;box-shadow:0 .4rem .4rem #0000000a}.navbar[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{max-width:1200px;margin:auto}.navbar-toggler[_ngcontent-%COMP%]{border:none}#search-bar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:relative;right:42px;border:none}.nav-item[_ngcontent-%COMP%], .nav-link.dropdown-toggle[_ngcontent-%COMP%]{display:flex;align-items:center}.nav-link.dropdown-toggle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:cover;border-radius:100%;margin-right:5px}"]});let e=n;return e})();var Ce=(()=>{let n=class n{};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=R({type:n,selectors:[["app-footer"]],standalone:!0,features:[T],decls:19,vars:9,consts:[["id","footer"],[1,"container-lg"],[1,"row","align-items-center"],[1,"col-sm-12","col-md-6","text-center","text-md-start"],[1,"app-logo"],["id","links",1,"col-sm-12","col-md-6","text-center","text-md-end"],["href","#"]],template:function(t,m){t&1&&(o(0,"div",0),s(1,"hr"),o(2,"div",1)(3,"div",2)(4,"div",3)(5,"span"),d(6,"\xA9"),r(),o(7,"span",4),d(8),p(9,"translate"),r()(),o(10,"div",5)(11,"a",6),d(12),p(13,"translate"),r(),o(14,"span"),d(15,"\xA0\xB7\xA0"),r(),o(16,"a",6),d(17),p(18,"translate"),r()()()()()),t&2&&(i(8),b(c(9,3,"GENERAL.TITLE")),i(4),b(c(13,5,"FOOTER.TOS")),i(5),b(c(18,7,"FOOTER.PRIVACY_POLICY")))},dependencies:[I,M],styles:[".container-lg[_ngcontent-%COMP%]{margin-bottom:1rem}#links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none}#links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000000bf}"]});let e=n;return e})();var Fe=["registerModalTemplate"],Ae=()=>["false","error"];function Ne(e,n){if(e&1&&(o(0,"button",15),d(1),p(2,"translate"),r()),e&2){let a=u(2);S("disabled",a.isRegisterFormValid===!1),i(),f(" ",c(2,2,"FORMS.VALIDATE")," ")}}function Ve(e,n){e&1&&(o(0,"button",15),s(1,"span",19),d(2),p(3,"translate"),r()),e&2&&(S("disabled",!0),i(2),f(" ",c(3,2,"FORMS.VALIDATION")," "))}function Ge(e,n){e&1&&(o(0,"p",16),s(1,"span",20),d(2),p(3,"translate"),r()),e&2&&(i(2),f(" ",c(3,1,"REGISTER_MODAL.ACCOUNT_CREATED")," "))}function He(e,n){if(e&1&&(o(0,"div",17)(1,"span"),d(2),p(3,"translate"),r()()),e&2){let a=u(2);i(2),b(c(3,1,a.registerError))}}function Pe(e,n){if(e&1){let a=k();o(0,"div",1)(1,"h4",2),d(2),p(3,"translate"),r()(),o(4,"div",3)(5,"p",4),d(6),p(7,"translate"),r(),s(8,"hr"),o(9,"form",5),_("ngSubmit",function(){x(a);let t=u();return E(t.onSubmit())}),o(10,"div",6)(11,"span",7),s(12,"span",8),r(),s(13,"input",9),p(14,"translate"),r(),o(15,"div",6)(16,"span",7),s(17,"span",10),r(),s(18,"input",11),p(19,"translate"),r(),o(20,"div",6)(21,"span",7),s(22,"span",12),r(),s(23,"input",13),p(24,"translate"),r(),o(25,"div",6)(26,"span",7),s(27,"span",12),r(),s(28,"input",14),p(29,"translate"),r(),o(30,"div",4),C(31,Ne,3,4,"button",15)(32,Ve,4,4,"button",15)(33,Ge,4,3,"p",16),r(),C(34,He,4,3,"div",17),r()(),s(35,"div",18)}if(e&2){let a=u();i(2),b(c(3,11,"GENERAL.TITLE")),i(4),b(c(7,13,"REGISTER_MODAL.REGISTER")),i(3),S("formGroup",a.registerForm),i(4),w("placeholder",c(14,15,"FORMS.USERNAME")),i(5),w("placeholder",c(19,17,"FORMS.EMAIL")),i(5),w("placeholder",c(24,19,"FORMS.PASSWORD")),i(5),w("placeholder",c(29,21,"FORMS.REPEAT_PASSWORD")),i(3),v(31,L(23,Ae).includes(a.onRegister)?31:-1),i(),v(32,a.onRegister==="true"?32:-1),i(),v(33,a.onRegister==="success"?33:-1),i(),v(34,a.onRegister==="error"?34:-1)}}var te=(()=>{let n=class n{constructor(l){this.authSharedService=l,this.modalService=$(X),this.registerForm=new B({name:new y("",[O.required]),email:new y("",[O.required]),password:new y("",[O.required]),repeatPassword:new y("",[O.required])}),this.registerError="",this.onRegister="false"}get isRegisterFormValid(){return this.registerForm.valid}open(){this.registerModalRef=this.modalService.open(this.registerModalTemplate),this.registerModalRef.closed.subscribe({complete:()=>{this.registerError="",this.onRegister="false",this.registerForm.controls.name.setValue(""),this.registerForm.controls.email.setValue(""),this.registerForm.controls.password.setValue(""),this.registerForm.controls.repeatPassword.setValue("")}})}onSubmit(){let l={name:this.registerForm.value.name,email:this.registerForm.value.email,password:this.registerForm.value.password,repeatedPassword:this.registerForm.value.repeatPassword};this.onRegister="true",this.authSharedService.register(l).subscribe({complete:()=>this.onRegister="success",error:t=>{let{type:m}=t.error;this.onRegister="error",m&&(this.registerError=`REGISTER_MODAL.ERRORS.${t.error.type}`)}})}};n.\u0275fac=function(t){return new(t||n)(h(G))},n.\u0275cmp=R({type:n,selectors:[["app-register"]],viewQuery:function(t,m){if(t&1&&F(Fe,5),t&2){let g;A(g=N())&&(m.registerModalTemplate=g.first)}},standalone:!0,features:[T],decls:2,vars:0,consts:[["registerModalTemplate",""],[1,"modal-header"],[1,"modal-title","app-logo"],[1,"modal-body"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"input-group","mb-3"],[1,"input-group-text"],[1,"fa-regular","fa-circle-user"],["id","name","type","text","formControlName","name",1,"form-control",3,"placeholder"],[1,"fa-regular","fa-envelope"],["id","email","type","email","formControlName","email",1,"form-control",3,"placeholder"],[1,"fa-solid","fa-lock"],["id","password","type","password","formControlName","password",1,"form-control",3,"placeholder"],["id","repeat-password","type","password","formControlName","repeatPassword",1,"form-control",3,"placeholder"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-success"],[1,"text-center","text-danger","mt-3"],[1,"modal-footer"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"fa-regular","fa-circle-check"]],template:function(t,m){t&1&&C(0,Pe,36,24,"ng-template",null,0,z)},dependencies:[Q,U,H,P,D,q,j,I,M],styles:[".modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none}.modal-title[_ngcontent-%COMP%]{flex-grow:1;text-align:center}"]});let e=n;return e})();var De=["loginModalTemplate"],Be=()=>["/auth/mot-de-passe-oublie"],Ue=()=>["false","error"];function qe(e,n){if(e&1&&(o(0,"button",14),d(1),p(2,"translate"),r()),e&2){let a=u(2);S("disabled",a.isLoginFormValid===!1),i(),f(" ",c(2,2,"LOGIN_MODAL.LOGIN2")," ")}}function je(e,n){e&1&&(o(0,"button",14),s(1,"span",17),d(2),p(3,"translate"),r()),e&2&&(S("disabled",!0),i(2),f(" ",c(3,2,"LOGIN_MODAL.CONNECTION")," "))}function Qe(e,n){if(e&1&&(o(0,"div",15)(1,"span"),d(2),p(3,"translate"),r()()),e&2){let a=u(2);i(2),b(c(3,1,a.loginError))}}function We(e,n){if(e&1){let a=k();o(0,"div",1)(1,"h4",2),d(2),p(3,"translate"),r()(),o(4,"div",3)(5,"p",4),d(6),p(7,"translate"),r(),s(8,"hr"),o(9,"form",5),_("ngSubmit",function(){x(a);let t=u();return E(t.onSubmit())}),o(10,"div",6)(11,"span",7),s(12,"span",8),r(),s(13,"input",9),p(14,"translate"),r(),o(15,"div",6)(16,"span",7),s(17,"span",10),r(),s(18,"input",11),p(19,"translate"),r(),o(20,"div",12)(21,"a",13),_("click",function(){x(a);let t=u();return E(t.loginModalRef.close())}),d(22),p(23,"translate"),r()(),o(24,"div",4),C(25,qe,3,4,"button",14)(26,je,4,4,"button",14),r(),C(27,Qe,4,3,"div",15),r()(),s(28,"div",16)}if(e&2){let a=u();i(2),b(c(3,10,"GENERAL.TITLE")),i(4),b(c(7,12,"LOGIN_MODAL.LOGIN")),i(3),S("formGroup",a.loginForm),i(4),w("placeholder",c(14,14,"FORMS.EMAIL")),i(5),w("placeholder",c(19,16,"FORMS.PASSWORD")),i(3),S("routerLink",L(20,Be)),i(),f(" ",c(23,18,"LOGIN_MODAL.PASSWORD_FORGOTTEN")," "),i(3),v(25,L(21,Ue).includes(a.onLogin)?25:-1),i(),v(26,a.onLogin==="true"?26:-1),i(),v(27,a.onLogin==="error"?27:-1)}}var ie=(()=>{let n=class n{constructor(l,t){this.authSharedService=l,this.userSharedService=t,this.modalService=$(X),this.loginForm=new B({email:new y("",[O.required]),password:new y("",[O.required])}),this.loginError="",this.onLogin="false"}get isLoginFormValid(){return this.loginForm.valid}onSubmit(){this.onLogin="true",this.authSharedService.login(this.loginForm.value).subscribe({complete:()=>{this.loginModalRef.close(),this.userSharedService.setUser()},error:l=>{let{type:t}=l.error;this.onLogin="error",t&&(this.loginError=`LOGIN_MODAL.ERRORS.${t}`)}})}open(){this.loginModalRef=this.modalService.open(this.loginModalTemplate),this.loginModalRef.closed.subscribe({complete:()=>{this.loginError="",this.onLogin="false",this.loginForm.controls.email.setValue(""),this.loginForm.controls.password.setValue("")}})}};n.\u0275fac=function(t){return new(t||n)(h(G),h(V))},n.\u0275cmp=R({type:n,selectors:[["app-login"]],viewQuery:function(t,m){if(t&1&&F(De,5),t&2){let g;A(g=N())&&(m.loginModalTemplate=g.first)}},standalone:!0,features:[T],decls:2,vars:0,consts:[["loginModalTemplate",""],[1,"modal-header"],[1,"modal-title","app-logo"],[1,"modal-body"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"input-group","mb-3"],[1,"input-group-text"],[1,"fa-regular","fa-envelope"],["id","email","type","email","formControlName","email",1,"form-control",3,"placeholder"],[1,"fa-solid","fa-lock"],["id","password","type","password","formControlName","password",1,"form-control",3,"placeholder"],["id","password-forgotten",1,"mb-3"],[1,"text-right",3,"click","routerLink"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-center","text-danger","mt-3"],[1,"modal-footer"],[1,"fa-solid","fa-spinner","fa-spin"]],template:function(t,m){t&1&&C(0,We,29,22,"ng-template",null,0,z)},dependencies:[Q,U,H,P,D,q,j,I,M,J],styles:[".modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none}.modal-title[_ngcontent-%COMP%]{flex-grow:1;text-align:center}#password-forgotten[_ngcontent-%COMP%]{text-align:right}"]});let e=n;return e})();var $e=()=>["success","error"];function Ye(e,n){e&1&&s(0,"router-outlet")}var xe=(()=>{let n=class n{constructor(l,t,m,g,W){this.translate=l,this.categorySharedService=t,this.forumSharedService=m,this.userSharedService=g,this.authSharedService=W,l.addLangs(["fr"]),l.setDefaultLang("fr"),l.use("fr")}ngOnInit(){this.categorySharedService.setAllCategories(),this.forumSharedService.setForums(),this.userSharedService.setUser()}logout(){this.authSharedService.doLogout()}onRegisterClick(){this.registerComponent.open()}onLoginClick(){this.loginComponent.open()}onLogoutClick(){this.logout()}};n.\u0275fac=function(t){return new(t||n)(h(de),h(K),h(ge),h(V),h(G))},n.\u0275cmp=R({type:n,selectors:[["app-root"]],viewQuery:function(t,m){if(t&1&&(F(te,5),F(ie,5)),t&2){let g;A(g=N())&&(m.registerComponent=g.first),A(g=N())&&(m.loginComponent=g.first)}},standalone:!0,features:[T],decls:6,vars:2,consts:[[3,"registerClick","loginCLick","logoutClick"]],template:function(t,m){t&1&&(o(0,"app-header",0),_("registerClick",function(){return m.onRegisterClick()})("loginCLick",function(){return m.onLoginClick()})("logoutClick",function(){return m.onLogoutClick()}),r(),o(1,"main"),C(2,Ye,1,0,"router-outlet"),r(),s(3,"app-footer")(4,"app-register")(5,"app-login")),t&2&&(i(2),v(2,L(1,$e).includes(m.userSharedService.onGetUser)?2:-1))},dependencies:[ce,ve,Ce,te,ie]});let e=n;return e})();pe(xe,fe).catch(e=>console.error(e));
