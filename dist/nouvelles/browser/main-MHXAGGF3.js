import{a as Z}from"./chunk-I4XE24CJ.js";import{a as he,b as ee}from"./chunk-JMB7UNRO.js";import{b as P,c as O,d as D,e as B,f as U,g as T,h as q,j,k as Q,q as W}from"./chunk-Z6WYBLOL.js";import{a as _e}from"./chunk-VRCR3VX3.js";import{$ as z,Aa as A,Ba as N,D as Y,Ea as m,F as x,Fa as b,G as E,Ga as _,Ia as w,La as k,Ma as de,Pa as s,Q as oe,Qa as p,R as ae,Ra as K,T as i,W as C,X as R,_a as me,aa as J,eb as ue,fb as ge,ga as v,gb as X,ha as S,ia as le,ib as G,ja as se,jb as H,ka as pe,la as u,lb as fe,ma as l,mb as L,na as r,nb as M,oa as d,ob as Ce,pa as I,qa as V,ra as ce,sa as y,ua as h,wa as g,za as F}from"./chunk-I6Z73YPW.js";var Te=e=>[e],ye=()=>["/article/nouveau"];function ke(e,n){if(e&1){let o=y();l(0,"li",7)(1,"a",18),h("click",function(){x(o);let t=g();return E(t.hideHamburgerMenu())}),m(2),r()()}if(e&2){let o=n.$implicit;i(),u("routerLink",de(2,Te,"/categorie/"+o.label)),i(),_(" ",o.name," ")}}function Le(e,n){if(e&1&&(d(0,"img",16),s(1,"translate")),e&2){let o=g();u("src",o.userSharedService.image,oe)("alt",p(1,2,"GENERAL.USER_IMAGE"))}}function Me(e,n){e&1&&(d(0,"i",19),m(1,"\xA0 "))}function Oe(e,n){if(e&1&&m(0),e&2){let o=g();_(" ",o.userSharedService.name," ")}}function Ie(e,n){e&1&&(m(0),s(1,"translate")),e&2&&_(" ",p(1,1,"HEADER.ACCOUNT.ACCOUNT")," ")}function Fe(e,n){if(e&1){let o=y();l(0,"li")(1,"a",20),h("click",function(){x(o);let t=g();return t.onRegisterClick(),E(t.hideHamburgerMenu())}),m(2),s(3,"translate"),r()(),l(4,"li")(5,"a",20),h("click",function(){x(o);let t=g();return t.onLoginClick(),E(t.hideHamburgerMenu())}),m(6),s(7,"translate"),r()()}e&2&&(i(2),_(" ",p(3,2,"GENERAL.REGISTER")," "),i(4),_(" ",p(7,4,"GENERAL.LOGIN")," "))}function Ae(e,n){if(e&1){let o=y();l(0,"li")(1,"a",21),h("click",function(){x(o);let t=g(2);return E(t.hideHamburgerMenu())}),d(2,"span",25),m(3),s(4,"translate"),r()()}e&2&&(i(),u("routerLink",k(4,ye)),i(2),_(" ",p(4,2,"HEADER.ACCOUNT.WRITE_ARTICLE")," "))}function Ne(e,n){if(e&1){let o=y();l(0,"li")(1,"a",21),h("click",function(){x(o);let t=g();return E(t.hideHamburgerMenu())}),d(2,"span",19),m(3),s(4,"translate"),r()(),v(5,Ae,5,5,"li"),l(6,"li")(7,"a",22),h("click",function(){x(o);let t=g();return E(t.hideHamburgerMenu())}),d(8,"span",23),m(9),s(10,"translate"),r()(),l(11,"li")(12,"a",20),h("click",function(){x(o);let t=g();return E(t.onLogoutClick())}),d(13,"span",24),m(14),s(15,"translate"),r()()}if(e&2){let o=g();i(),u("routerLink",w(o.profileLink)),i(2),_(" ",p(4,6,"HEADER.ACCOUNT.MY_ACCOUNT")," "),i(2),S(o.userSharedService.roles&&(o.userSharedService.roles.includes("redacteur")||o.userSharedService.roles.includes("admin"))?5:-1),i(4),_(" ",p(10,8,"HEADER.ACCOUNT.SETTINGS")," "),i(5),_(" ",p(15,10,"HEADER.ACCOUNT.LOUGOUT")," ")}}var xe=(()=>{let n=class n{constructor(a,t,c,f){this.router=a,this.userSharedService=t,this.categorySharedService=c,this.urlSharedService=f,this.registerClick=new J,this.loginCLick=new J,this.logoutClick=new J}get profileLink(){return this.userSharedService.isLoggedIn?`/profile/${this.userSharedService.id}/${this.urlSharedService.toLowerURL(this.userSharedService.name)}`:null}ngOnInit(){this.searchForm=new U({query:new T("")})}hideHamburgerMenu(){let a=document.querySelector(".navbar-toggler");a&&window.innerWidth<992&&a.click()}onWindowClick(a){let t=document.querySelector("header"),c=document.querySelector(".navbar-collapse.collapse.show");t?.contains(a.target)===!1&&c&&this.hideHamburgerMenu()}onRegisterClick(){this.registerClick.emit()}onLoginClick(){this.loginCLick.emit()}onLogoutClick(){this.logoutClick.emit(),this.hideHamburgerMenu()}onSearchSubmit(a){a.preventDefault();let t=this.searchForm.controls.query.value;if(t){if(this.router.url.includes("/rechercher")){let c=new CustomEvent("headerSearch",{bubbles:!0,cancelable:!0,detail:{query:t}});document.dispatchEvent(c)}else this.router.navigate(["/rechercher"],{queryParams:{query:t}}),this.hideHamburgerMenu();this.searchForm.controls.query.setValue("")}}};n.\u0275fac=function(t){return new(t||n)(C(ge),C(G),C(Z),C(_e))},n.\u0275cmp=R({type:n,selectors:[["app-header"]],hostBindings:function(t,c){t&1&&h("click",function($){return c.onWindowClick($)},ae)},outputs:{registerClick:"registerClick",loginCLick:"loginCLick",logoutClick:"logoutClick"},decls:32,vars:14,consts:[[1,"navbar","navbar-expand-lg"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand","app-logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbar-toggler","aria-controls","navbar-toggler","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbar-toggler",1,"collapse","navbar-collapse"],[1,"navbar-nav","mb-2","mb-lg-0"],[1,"nav-item"],["id","search-bar","role","search",1,"d-flex",3,"submit","formGroup"],["type","search","formControlName","query",1,"form-control",3,"placeholder"],["type","submit",1,"btn"],[1,"fa-solid","fa-magnifying-glass"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],["routerLink","forum",1,"nav-link",3,"click"],[1,"dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[3,"src","alt"],[1,"dropdown-menu"],[1,"nav-link",3,"click","routerLink"],[1,"fa-regular","fa-circle-user"],[1,"dropdown-item",3,"click"],[1,"dropdown-item",3,"click","routerLink"],["routerLink","/parametres",1,"dropdown-item",3,"click"],[1,"fa-solid","fa-gear"],[1,"fa-solid","fa-arrow-right-from-bracket"],[1,"fa-solid","fa-pen-to-square"]],template:function(t,c){t&1&&(l(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),m(4),s(5,"translate"),r(),l(6,"button",3),d(7,"span",4),r(),l(8,"div",5)(9,"ul",6),se(10,ke,3,4,"li",7,le),l(12,"li",7)(13,"form",8),h("submit",function($){return c.onSearchSubmit($)}),d(14,"input",9),s(15,"translate"),l(16,"button",10),d(17,"i",11),r()()()(),l(18,"ul",12)(19,"li",7)(20,"a",13),h("click",function(){return c.hideHamburgerMenu()}),m(21),s(22,"translate"),r()(),l(23,"li",14)(24,"a",15),v(25,Le,2,4,"img",16)(26,Me,2,0),v(27,Oe,1,1)(28,Ie,2,3),r(),l(29,"ul",17),v(30,Fe,8,6)(31,Ne,16,12),r()()()()()()()),t&2&&(i(4),_(" ",p(5,8,"GENERAL.TITLE")," "),i(6),pe(c.categorySharedService.categories),i(3),u("formGroup",c.searchForm),i(),u("placeholder",w(p(15,10,"GENERAL.SEARCH"))),i(7),_(" ",p(22,12,"GENERAL.FORUM")),i(4),S(c.userSharedService.image?25:26),i(2),S(c.userSharedService.name?27:28),i(3),S(c.userSharedService.isLoggedIn===!1?30:31))},dependencies:[M,W,q,P,D,B,j,Q,X,L],styles:["header[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:1000;background-color:#fff;box-shadow:0 .4rem .4rem #0000000a}.navbar[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{max-width:1200px;margin:auto}.navbar-toggler[_ngcontent-%COMP%]{border:none}#search-bar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:relative;right:42px;border:none}.nav-item[_ngcontent-%COMP%], .nav-link.dropdown-toggle[_ngcontent-%COMP%]{display:flex;align-items:center}.nav-link.dropdown-toggle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:cover;border-radius:100%;margin-right:5px}"]});let e=n;return e})();var Ee=(()=>{let n=class n{};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=R({type:n,selectors:[["app-footer"]],decls:19,vars:9,consts:[["id","footer"],[1,"container-lg"],[1,"row","align-items-center"],[1,"col-sm-12","col-md-6","text-center","text-md-start"],[1,"app-logo"],["id","links",1,"col-sm-12","col-md-6","text-center","text-md-end"],["href","#"]],template:function(t,c){t&1&&(I(0,"div",0),ce(1,"hr"),I(2,"div",1)(3,"div",2)(4,"div",3)(5,"span"),m(6,"\xA9"),V(),I(7,"span",4),m(8),s(9,"translate"),V()(),I(10,"div",5)(11,"a",6),m(12),s(13,"translate"),V(),I(14,"span"),m(15,"\xA0\xB7\xA0"),V(),I(16,"a",6),m(17),s(18,"translate"),V()()()()()),t&2&&(i(8),b(p(9,3,"GENERAL.TITLE")),i(4),b(p(13,5,"FOOTER.TOS")),i(5),b(p(18,7,"FOOTER.PRIVACY_POLICY")))},dependencies:[M,L],styles:[".container-lg[_ngcontent-%COMP%]{margin-bottom:1rem}#links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000000a6;text-decoration:none}#links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000000bf}"]});let e=n;return e})();var Ve=["registerModalTemplate"],Ge=()=>["false","error"];function He(e,n){if(e&1&&(l(0,"button",15),m(1),s(2,"translate"),r()),e&2){let o=g(2);u("disabled",o.isRegisterFormValid===!1),i(),_(" ",p(2,2,"FORMS.VALIDATE")," ")}}function Pe(e,n){e&1&&(l(0,"button",15),d(1,"span",19),m(2),s(3,"translate"),r()),e&2&&(u("disabled",!0),i(2),_(" ",p(3,2,"FORMS.VALIDATION")," "))}function De(e,n){e&1&&(l(0,"p",16),d(1,"span",20),m(2),s(3,"translate"),r()),e&2&&(i(2),_(" ",p(3,1,"REGISTER_MODAL.ACCOUNT_CREATED")," "))}function Be(e,n){if(e&1&&(l(0,"div",17)(1,"span"),m(2),s(3,"translate"),r()()),e&2){let o=g(2);i(2),b(p(3,1,o.registerError))}}function Ue(e,n){if(e&1){let o=y();l(0,"div",1)(1,"h4",2),m(2),s(3,"translate"),r()(),l(4,"div",3)(5,"p",4),m(6),s(7,"translate"),r(),d(8,"hr"),l(9,"form",5),h("ngSubmit",function(){x(o);let t=g();return E(t.onSubmit())}),l(10,"div",6)(11,"span",7),d(12,"span",8),r(),d(13,"input",9),s(14,"translate"),r(),l(15,"div",6)(16,"span",7),d(17,"span",10),r(),d(18,"input",11),s(19,"translate"),r(),l(20,"div",6)(21,"span",7),d(22,"span",12),r(),d(23,"input",13),s(24,"translate"),r(),l(25,"div",6)(26,"span",7),d(27,"span",12),r(),d(28,"input",14),s(29,"translate"),r(),l(30,"div",4),v(31,He,3,4,"button",15),v(32,Pe,4,4,"button",15),v(33,De,4,3,"p",16),r(),v(34,Be,4,3,"div",17),r()(),d(35,"div",18)}if(e&2){let o=g();i(2),b(p(3,15,"GENERAL.TITLE")),i(4),b(p(7,17,"REGISTER_MODAL.REGISTER")),i(3),u("formGroup",o.registerForm),i(4),u("placeholder",w(p(14,19,"FORMS.USERNAME"))),i(5),u("placeholder",w(p(19,21,"FORMS.EMAIL"))),i(5),u("placeholder",w(p(24,23,"FORMS.PASSWORD"))),i(5),u("placeholder",w(p(29,25,"FORMS.REPEAT_PASSWORD"))),i(3),S(k(27,Ge).includes(o.onRegister)?31:-1),i(),S(o.onRegister==="true"?32:-1),i(),S(o.onRegister==="success"?33:-1),i(),S(o.onRegister==="error"?34:-1)}}var ne=(()=>{let n=class n{constructor(a){this.authSharedService=a,this.modalService=Y(ee),this.registerForm=new U({name:new T("",[O.required]),email:new T("",[O.required]),password:new T("",[O.required]),repeatPassword:new T("",[O.required])}),this.registerError="",this.onRegister="false"}get isRegisterFormValid(){return this.registerForm.valid}open(){this.registerModalRef=this.modalService.open(this.registerModalTemplate),this.registerModalRef.closed.subscribe({complete:()=>{this.registerError="",this.onRegister="false",this.registerForm.controls.name.setValue(""),this.registerForm.controls.email.setValue(""),this.registerForm.controls.password.setValue(""),this.registerForm.controls.repeatPassword.setValue("")}})}onSubmit(){let a={name:this.registerForm.value.name,email:this.registerForm.value.email,password:this.registerForm.value.password,repeatedPassword:this.registerForm.value.repeatPassword};this.onRegister="true",this.authSharedService.register(a).subscribe({complete:()=>this.onRegister="success",error:t=>{let{type:c}=t.error;this.onRegister="error",c&&(this.registerError=`REGISTER_MODAL.ERRORS.${t.error.type}`)}})}};n.\u0275fac=function(t){return new(t||n)(C(H))},n.\u0275cmp=R({type:n,selectors:[["app-register"]],viewQuery:function(t,c){if(t&1&&F(Ve,5),t&2){let f;A(f=N())&&(c.registerModalTemplate=f.first)}},decls:2,vars:0,consts:[["registerModalTemplate",""],[1,"modal-header"],[1,"modal-title","app-logo"],[1,"modal-body"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"input-group","mb-3"],[1,"input-group-text"],[1,"fa-regular","fa-circle-user"],["id","name","type","text","formControlName","name",1,"form-control",3,"placeholder"],[1,"fa-regular","fa-envelope"],["id","email","type","email","formControlName","email",1,"form-control",3,"placeholder"],[1,"fa-solid","fa-lock"],["id","password","type","password","formControlName","password",1,"form-control",3,"placeholder"],["id","repeat-password","type","password","formControlName","repeatPassword",1,"form-control",3,"placeholder"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-success"],[1,"text-center","text-danger","mt-3"],[1,"modal-footer"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"fa-regular","fa-circle-check"]],template:function(t,c){t&1&&z(0,Ue,36,28,"ng-template",null,0,K)},dependencies:[W,q,P,D,B,j,Q,M,L],styles:[".modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none}.modal-title[_ngcontent-%COMP%]{flex-grow:1;text-align:center}"]});let e=n;return e})();var qe=["loginModalTemplate"],je=()=>["/auth/mot-de-passe-oublie"],Qe=()=>["false","error"];function We(e,n){if(e&1&&(l(0,"button",14),m(1),s(2,"translate"),r()),e&2){let o=g(2);u("disabled",o.isLoginFormValid===!1),i(),_(" ",p(2,2,"LOGIN_MODAL.LOGIN2")," ")}}function $e(e,n){e&1&&(l(0,"button",14),d(1,"span",17),m(2),s(3,"translate"),r()),e&2&&(u("disabled",!0),i(2),_(" ",p(3,2,"LOGIN_MODAL.CONNECTION")," "))}function Ye(e,n){if(e&1&&(l(0,"div",15)(1,"span"),m(2),s(3,"translate"),r()()),e&2){let o=g(2);i(2),b(p(3,1,o.loginError))}}function ze(e,n){if(e&1){let o=y();l(0,"div",1)(1,"h4",2),m(2),s(3,"translate"),r()(),l(4,"div",3)(5,"p",4),m(6),s(7,"translate"),r(),d(8,"hr"),l(9,"form",5),h("ngSubmit",function(){x(o);let t=g();return E(t.onSubmit())}),l(10,"div",6)(11,"span",7),d(12,"span",8),r(),d(13,"input",9),s(14,"translate"),r(),l(15,"div",6)(16,"span",7),d(17,"span",10),r(),d(18,"input",11),s(19,"translate"),r(),l(20,"div",12)(21,"a",13),h("click",function(){x(o);let t=g();return E(t.loginModalRef.close())}),m(22),s(23,"translate"),r()(),l(24,"div",4),v(25,We,3,4,"button",14),v(26,$e,4,4,"button",14),r(),v(27,Ye,4,3,"div",15),r()(),d(28,"div",16)}if(e&2){let o=g();i(2),b(p(3,12,"GENERAL.TITLE")),i(4),b(p(7,14,"LOGIN_MODAL.LOGIN")),i(3),u("formGroup",o.loginForm),i(4),u("placeholder",w(p(14,16,"FORMS.EMAIL"))),i(5),u("placeholder",w(p(19,18,"FORMS.PASSWORD"))),i(3),u("routerLink",k(22,je)),i(),_(" ",p(23,20,"LOGIN_MODAL.PASSWORD_FORGOTTEN")," "),i(3),S(k(23,Qe).includes(o.onLogin)?25:-1),i(),S(o.onLogin==="true"?26:-1),i(),S(o.onLogin==="error"?27:-1)}}var re=(()=>{let n=class n{constructor(a,t){this.authSharedService=a,this.userSharedService=t,this.modalService=Y(ee),this.loginForm=new U({email:new T("",[O.required]),password:new T("",[O.required])}),this.loginError="",this.onLogin="false"}get isLoginFormValid(){return this.loginForm.valid}onSubmit(){this.onLogin="true",this.authSharedService.login(this.loginForm.value).subscribe({complete:()=>{this.loginModalRef.close(),this.userSharedService.setUser()},error:a=>{let{type:t}=a.error;this.onLogin="error",t&&(this.loginError=`LOGIN_MODAL.ERRORS.${t}`)}})}open(){this.loginModalRef=this.modalService.open(this.loginModalTemplate),this.loginModalRef.closed.subscribe({complete:()=>{this.loginError="",this.onLogin="false",this.loginForm.controls.email.setValue(""),this.loginForm.controls.password.setValue("")}})}};n.\u0275fac=function(t){return new(t||n)(C(H),C(G))},n.\u0275cmp=R({type:n,selectors:[["app-login"]],viewQuery:function(t,c){if(t&1&&F(qe,5),t&2){let f;A(f=N())&&(c.loginModalTemplate=f.first)}},decls:2,vars:0,consts:[["loginModalTemplate",""],[1,"modal-header"],[1,"modal-title","app-logo"],[1,"modal-body"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"input-group","mb-3"],[1,"input-group-text"],[1,"fa-regular","fa-envelope"],["id","email","type","email","formControlName","email",1,"form-control",3,"placeholder"],[1,"fa-solid","fa-lock"],["id","password","type","password","formControlName","password",1,"form-control",3,"placeholder"],["id","password-forgotten",1,"mb-3"],[1,"text-right",3,"click","routerLink"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-center","text-danger","mt-3"],[1,"modal-footer"],[1,"fa-solid","fa-spinner","fa-spin"]],template:function(t,c){t&1&&z(0,ze,29,24,"ng-template",null,0,K)},dependencies:[W,q,P,D,B,j,Q,M,X,L],styles:[".modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none}.modal-title[_ngcontent-%COMP%]{flex-grow:1;text-align:center}#password-forgotten[_ngcontent-%COMP%]{text-align:right}"]});let e=n;return e})();var Je=()=>["success","error"];function Ke(e,n){e&1&&d(0,"router-outlet")}var we=(()=>{let n=class n{constructor(a,t,c,f,$){this.translate=a,this.categorySharedService=t,this.forumSharedService=c,this.userSharedService=f,this.authSharedService=$,a.addLangs(["fr"]),a.setDefaultLang("fr"),a.use("fr")}ngOnInit(){this.categorySharedService.setAllCategories(),this.forumSharedService.setForums(),this.userSharedService.setUser()}logout(){this.authSharedService.doLogout()}onRegisterClick(){this.registerComponent.open()}onLoginClick(){this.loginComponent.open()}onLogoutClick(){this.logout()}};n.\u0275fac=function(t){return new(t||n)(C(fe),C(Z),C(he),C(G),C(H))},n.\u0275cmp=R({type:n,selectors:[["app-root"]],viewQuery:function(t,c){if(t&1&&(F(ne,5),F(re,5)),t&2){let f;A(f=N())&&(c.registerComponent=f.first),A(f=N())&&(c.loginComponent=f.first)}},decls:6,vars:2,consts:[[3,"registerClick","loginCLick","logoutClick"]],template:function(t,c){t&1&&(l(0,"app-header",0),h("registerClick",function(){return c.onRegisterClick()})("loginCLick",function(){return c.onLoginClick()})("logoutClick",function(){return c.onLogoutClick()}),r(),l(1,"main"),v(2,Ke,1,0,"router-outlet"),r(),d(3,"app-footer")(4,"app-register")(5,"app-login")),t&2&&(i(2),S(k(1,Je).includes(c.userSharedService.onGetUser)?2:-1))},dependencies:[ue,xe,Ee,ne,re],encapsulation:2});let e=n;return e})();me(we,Ce).catch(e=>console.error(e));
