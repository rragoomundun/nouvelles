@if (canEdit === false) {
  <div id="error-edit">
    <h2>{{ "ARTICLE_WRITE_PAGE.ERRORS.EDIT" | translate }}</h2>
  </div>
} @else if (canEdit === true || canEdit === undefined) {
  <h2 class="title">{{ "ARTICLE_WRITE_PAGE.TITLE" | translate }}</h2>

  <form [formGroup]="articleForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="title" class="form-label">
        {{ "ARTICLE_WRITE_PAGE.ARTICLE_TITLE" | translate }}
      </label>
      <input
        id="title"
        class="form-control"
        type="text"
        formControlName="title"
        required
      />
    </div>

    <div class="mb-3">
      <label for="file" class="form-label">
        {{ "ARTICLE_WRITE_PAGE.IMAGE" | translate }}
      </label>
      <input
        (change)="onFileSelected($event)"
        id="file"
        class="form-control"
        type="file"
        required
      />

      @if (originalImage) {
        <div id="original-image" class="mt-1">
          <label class="form-label">
            {{ "ARTICLE_WRITE_PAGE.IMAGE_CONTINUE_USING" | translate }}
          </label>

          <br />

          <img [src]="originalImage" />
        </div>
      }
    </div>

    <div class="mb-3">
      <label for="category" class="form-label">
        {{ "GENERAL.CATEGORY" | translate }}
      </label>
      <select
        id="category"
        class="form-select"
        formControlName="category"
        required
      >
        @for (category of categoryService.categories; track category) {
          <option value="{{ category.label }}">{{ category.name }}</option>
        }
      </select>
    </div>

    <div class="mb-3">
      <div class="form-check">
        <input
          id="publish"
          class="form-check-input"
          type="checkbox"
          value=""
          formControlName="published"
          required
        />
        <label class="form-check-label" for="publish">
          {{ "ARTICLE_WRITE_PAGE.PUBLISH" | translate }}
        </label>
      </div>
    </div>

    <div class="mb-3">
      <label for="content" class="form-label">
        {{ "ARTICLE_WRITE_PAGE.CONTENT" | translate }}
      </label>
      <textarea
        id="content"
        class="form-control"
        cols="30"
        rows="10"
        formControlName="content"
        required
      ></textarea>
    </div>

    <div class="text-end">
      @if (["false", "success", "error"].includes(onValidate)) {
        <button
          [disabled]="isArticleFormValid === false"
          class="btn btn-primary"
          type="submit"
        >
          {{ "FORMS.VALIDATE" | translate }}
        </button>
      }

      @if (onValidate === "true") {
        <button [disabled]="true" type="submit" class="btn btn-primary">
          <span class="fa-solid fa-spinner fa-spin"></span>
          {{ "FORMS.VALIDATION" | translate }}
        </button>
      }
    </div>

    @if (onValidate === "success") {
      <div class="text-end text-success mt-3">
        <span>{{ "ARTICLE_WRITE_PAGE.VALIDATED" | translate }}</span>
      </div>
    }

    @if (onValidate === "error") {
      <div class="text-end text-danger mt-3">
        <span>{{ "ARTICLE_WRITE_PAGE.ERRORS.VALIDATE" | translate }}</span>
      </div>
    }
  </form>
}
